<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="lt-ie10 lt-ie9 lt-ie8 lt-ie7 no-js"> <![endif]-->
<!--[if IE 7]>         <html class="lt-ie10 lt-ie9 lt-ie8 no-js"> <![endif]-->
<!--[if IE 8]>         <html class="lt-ie10 lt-ie9 no-js"> <![endif]-->
<!--[if IE 9]>         <html class="lt-ie10 no-js"> <![endif]-->
<!--[if gt IE 9]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <title>Flora Colossus to English Translator</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1, minimal-ui" />
        <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,400,300,600' rel='stylesheet' type='text/css'>
        <link href='CSS/style.css' rel='stylesheet' type='text/css'>
        <script>
            (function () {
                var $html = document.getElementsByTagName('html')[0],
                    js = document.createElement('script'),
                    $head = $html.getElementsByTagName('head')[0];

                if ($html.className.split('lt-IE9').length > 1) {
                    js.src = 'js/jquery-1.11.1.min.js';
                } else {
                    js.src = 'js/jquery-2.1.1.min.js';
                }
                $head.appendChild(js);
                js = document.createElement('script');
                js.src = 'js/knockout-3.1.0.js';
                $head.appendChild(js);
            })();
        </script>
    </head>
    <body>
        <noscript>
            I hate sites that don't work without JavaScript. But I hate paying for hosting more. So I have a JS requirement.
        </noscript>

        <div class="wrap">
            <h1>English to Flora Colossus Translator</h1>
            <p>
                The time may come when traveling around the galaxy when you run into a Flora Colossus. Not to be mistaken as an Ent of Middle Earth,
                Flora Colossus are tree-like beings from Planet X, the capital of the branch worlds. Unfortunately for us, their biology makes it difficult
                for us to always understand what they are saying. Most being simply hear the phrase: <em>I am Groot</em>.
            </p>
            <p>
                Thanks to cutting edge research in the field of Xenolinguistics, we have been able to understand what they are saying to you and in return
                translate your phrase into a phrase that is more in line with their natural toungue.
            </p>
            <textarea class="english" data-bind="value:english, disable: startMode()==='F', attr:{'placeholder': englishPlaceholder}"></textarea>
            <div class="toggle-wrap" data-bind="css: {'-reverse': startMode()==='F'}">
                <a data-bind="click: function () {
                    startMode('E')
                }">English to Flora Colossus</a>
                <a data-bind="click: function () {
                    startMode('F')
                }">Flora Colossus to English</a>
            </div>
            <textarea class="flora" data-bind="value:floraColossus, disable: startMode()==='E', attr:{'placeholder': floraPlaceholder}"></textarea>
            <a class="btn" data-bind="click:translate">Translate</a>
        </div>
        <script>
            (function () {
                var $translator = {};
                function waitForLoad() {
                    if (window.jQuery === undefined || window.ko === undefined) {
                        setTimeout(function () {
                            waitForLoad();
                        },100);
                        return;
                    }
                    $translator.startMode = ko.observable('E');
                    $translator.english = ko.observable('');
                    $translator.floraColossus = ko.observable('');
                    $translator.floraPlaceholder = ko.computed(function () {
                        if ($translator.startMode() === 'E') {
                            return 'Please enter English text and Press the translate button.';
                        }
                        return 'Please enter some of the Flora Colossus language and press the translate button to see the English translation.';
                    });
                    $translator.englishPlaceholder = ko.computed(function () {
                        if ($translator.startMode() === 'F') {
                            return 'Please enter Flora Colossus text and Press the translate button.';
                        }
                        return 'Please enter some of the English language and press the translate button to see the Flora Colossus translation.';
                    });
                    $translator.floraOptions = [
                        "Flower Power Activate!",
                        "I have to be careful when I sleep. Cosmo sometimes mistakes my leg for a tree trunk.",
                        "I think you may be barking up the wrong tree.",
                        "I have no idea who Jackson Pollock is, but apparently he decorated my room.",
                        "Why does no one understand what I am saying?",
                        "Wherever you go in life, never forget your roots.",
                        "Anyone need a toothpick?",
                        "What was that? I wasn't listening.",
                        "My name isn't Groot.",
                        "Sometimes I don't know why I bother.",
                    ];
                    $translator.floraOptionsAlt = [
                        "I would die anyways. But through this you might live.",
                        "Ok guys, before the impact throw your full weight towards the door. We will roll our way out of this thing.",
                        "Group hug.",
                        "There are worse ways to die."
                    ];
                    $translator.startMode.subscribe(function () {
                        $translator.english('');
                        $translator.floraColossus('');
                        setTimeout(function () {

                            if ($translator.startMode() === 'E') {
                                $('textarea.english').focus();
                            } else {
                                $('textarea.flora').focus();
                            }
                        }, 100);
                    });
                    $translator.english.subscribe(function () {
                        var $trimed = $.trim($translator.english());
                        if ($trimed !== $translator.english()) {
                            $translator.english($trimed);
                        }
                    });
                    $translator.floraColossus.subscribe(function () {
                        var $trimed = $.trim($translator.floraColossus());
                        if ($trimed !== $translator.floraColossus()) {
                            $translator.floraColossus($trimed);
                        }
                    });
                    $translator.translate = function () {
                        var $punctuation = '.',
                            $saying = $translator.floraOptions[Math.floor(Math.random() * ($translator.floraOptions.length))],
                            $sayingAlt = $translator.floraOptionsAlt[Math.floor(Math.random() * ($translator.floraOptionsAlt.length))];
                        if ($translator.startMode() === 'E') {
                            if ($translator.english().length > 0) {
                                if ($translator.floraColossus().length % 2 === 0 ) {
                                    $punctuation = '!';
                                }
                                $translator.floraColossus('I am Groot' + $punctuation);
                            }
                            return;
                        }
                        if (
                            $translator.floraColossus().toLowerCase() === 'i am groot' ||
                            $translator.floraColossus().toLowerCase() === 'i am groot.'||
                            $translator.floraColossus().toLowerCase() === 'i am groot!'||
                            $translator.floraColossus().toLowerCase() === 'i am groot?'
                        ) {
                            $translator.english($saying);
                        }  else if (
                            $translator.floraColossus().toLowerCase() === 'we am groot' ||
                            $translator.floraColossus().toLowerCase() === 'we am groot.'||
                            $translator.floraColossus().toLowerCase() === 'we am groot!'||
                            $translator.floraColossus().toLowerCase() === 'we am groot?'
                        ) {
                            $translator.english($sayingAlt);
                        } else {
                            $translator.english('Error... Phrase not recognized as part of the Flora Colossus language');
                        }
                    }
                    ko.applyBindings($translator);
                    setTimeout(function () {
                        $('textarea.english').focus();
                    });
                }
                waitForLoad();
            })();
        </script>
    </body>
</html>
